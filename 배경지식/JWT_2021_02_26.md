# JWT

= Json Web Token

Json 포맷을 이용하여 사용자에 대한 속성을 저장하는 Claim 기반의 Web Token

JSON 객체를 사용하여 가볍고 토큰 자체를 정보로 사용하는 자가수용적인 (self-contained) 방식으로 정보를 안전성 있게 전달함

### 구조

<img src="https://media.vlpt.us/images/geunwoobaek/post/88177b57-8888-4759-b4b8-59543a0b026e/image.png" alt="img" style="zoom: 80%;" />

- **HEADER**

  사용한 해쉬알고리즘
  서명(id,password)에 해당하는 부분을 암호화 시킬 필요가 있는데 해독 알고리즘 정보가 담겨있음

  > alg : 알고리즘 방식 지정
  > typ : 토큰의 타입을 지정

- **PAYLOAD**

  담을 내용
  토큰에서 사용할 정보의 조각들인 클레임(Claim)이 담겨 있음

  > 클레임은 3종류가 있음

- **SIGNATURE**

  서명 (ID+PASSWORD)
  토큰을 인코딩하거나 유효성 검증을 할 때 사용하는 고유한 암호화 코드

### 사용과정

1. 브라우저의 로그인 과정에서 회원 정보를 입력

2. 서버가 JWT를 만들고 브라우저에 보냄

3. 브라우저가 JWT를 가지고 서버에게 데이터를 요청

4. 서버는 토큰을 확인하고 유저 정보를 클라이언트에게 제공

### 주의할 점

- 토큰의 페이로드에 3 종류의 클레임을 저장하므로, 정보가 많아질수록 토큰의 길이가 늘어나서 네트워크에 부하를 줄 수 있음
- 페이로드는 암호화가 된 것이 아니라 BASE64로 인코딩 된 것이여서, 중간에 페이로드를 탈취하여 디코딩하면 데이터를 볼 수 있으므로, 중요데이터를 넣으면 안됨
- JWT는 상태를 저장하지 않기 때문에 한번 만들어지면 제어가 불가능하므로, 토큰 만료 시간을 꼭 넣어줘야 함